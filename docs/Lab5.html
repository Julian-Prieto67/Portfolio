<!DOCTYPE html>

<!--
 // WEBSITE: https://themefisher.com
 // TWITTER: https://twitter.com/themefisher
 // FACEBOOK: https://www.facebook.com/themefisher
 // GITHUB: https://github.com/themefisher/
-->

<html class="no-js">

<head>
  <!-- Basic Page Needs
        ================================================== -->
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="icon" href="favicon.ico">
  <title>Julian Prieto | Lab 5</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="author" content="">
  <!-- Mobile Specific Metas
        ================================================== -->
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <!-- Template CSS Files
        ================================================== -->
  <!-- Twitter Bootstrs CSS -->
  <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
  <!-- Ionicons Fonts Css -->
  <link rel="stylesheet" href="plugins/ionicons/ionicons.min.css">
  <!-- animate css -->
  <link rel="stylesheet" href="plugins/animate-css/animate.css">
  <!-- Hero area slider css-->
  <link rel="stylesheet" href="plugins/slider/slider.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="plugins/slick/slick.css">
  <!-- Fancybox -->
  <link rel="stylesheet" href="plugins/facncybox/jquery.fancybox.css">
  <!-- hover -->
  <link rel="stylesheet" href="plugins/hover/hover-min.css">
  <!-- template main css file -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!--
        ==================================================
        Header Section Start
        ================================================== -->
  <section class="top-bar animated-header">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="index.html">
              <!-- <img class="logo" src="./images/logo.jpg" alt="logo"> -->
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <a class="nav-link" href="index.html">Home
                    <span class="sr-only">(current)</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="about.html">About</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </section>
  <!--
==================================================
Global Page Section Start
================================================== -->
  <section class="global-page-header">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="block">
            <h2>Lab 5: Motor Drivers</h2>
            <div class="portfolio-meta">
              <span>March 8th, 2023</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--/#Page header-->

  <!-- work details part start -->
  <section class="work-single">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div style="display: flex; justify-content: center;" class="work-single-image">
            <!-- Work Single Image -->
            <img style="height: 330px" src="images/lab5prof.png" alt="work-single-image">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
          <!-- work single Content -->
          <div class="work-single-content">
            <h2 style=" text-align: center">
              INTRODUCTION
            </h2>
            <p>Motor control in a stunt robot, like the one used in this class, needs to be precise, powerful and
              accurate. I was able to accomplish these goals
              by following the tasks outlined in <a href="https://cei-lab.github.io/FastRobots-2023/Lab5.html">Lab
                5</a>,
              Through the use of the motor drivers provided, my newly put together robot exhibits expert meneuverability
              and advanced motor control through a two-channel H-bridge.
            </p>
            <h2 style="text-align: center">BEFORE LAB</h2>
            <p>
              Prior to coming into lab, I had to decide what the wiring would look like for my completed robot.
              The circuitry drawn below is my plan for the wired connections. Everything was soldered with braided
              wire where possible and with the connections to the pre-designated Artemis pins.
              The pins for the motor driver inputs in particular were chosen for their PWM support and relative
              proiximity. One interesting note are the two batteries I used to power the robot.
              Splitting up the batteries plays an important role in performance. I could've used a single battery that could've
              powered both the Artemis and the motor, but this would've come with a few issues. While the Artemis will
              take a very small percentage of the total battery capacity, seperating the batteries still remains useful
              in order to avoid transient effects which may prematurely reset the microcontroller after current draw.
              The additional battery will also add to our total energy capacity, allowing me to continue testing for longer.

            <p>
              <img style="height: 200px" src="Circuit (5).png">

            <h2 style="text-align: center">THE MOTOR DRIVERS</h2>
            <img style="width: 350px" src="PictureSetup.jpg">
            <p>
              Being able to test the motor drivers before using them on my actual robot proved an exceptional way to
              verify my wiring and characterize the PWM signals from an oscilloscope. Avoiding battery power at this
              point, I was able to determine that the ideal voltage to set the power supply should be the same as the
              battery would supply: 3.7V.
              Above is a picture of the setup I used to test the motor drivers. The experiment proved successful and
              pretty soon I was on my way to testing different motor speeds and battery power as shown below.
            </p>
            <iframe width="320" height="560" src="https://www.youtube.com/embed/VwYexH9THrg" title="Lab 5 spun wheels"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
            <blockquote> Above I test the motors through the power supply unit in the lab. Below is some corresponding
              oscilloscope data from the input pins on the motor driver</blockquote>
            <img style="width: 350px" src="Oscilloscope_display.jpg">
            <iframe width="320" height="560" src="https://www.youtube.com/embed/kS0ec9-_TfQ"
              title="Lab 5 battery power motors" frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
            <blockquote> Above is a video of the battery powered test I performed on the car and below is the code used
              to test. I constantly changed the code to accomodate different responses, however, the same functions were
              reused and based off the below code. </blockquote>
            <img style="width: 350px" src="codesnip2.PNG">
            <img style="width: 350px" src="codesnip.PNG">
            <img style="width: 350px" src="codesnip3.PNG">

            <h2 style="text-align: center">ASSEMBLY</h2>
            <p>
              After a few hours of soldering, clipping wires, and re-soldering, I was able to come up the following
              final bot:
            </p>
            <img style="width: 350px" src="Markupschematic.jpg">
            <h2 style="text-align: center">CALLIBRATION</h2>
            <p>
              The next task given in the lab manual after assembly was to start with some remote operation and
              callibration of the motors. This meant driving the car in a straight line for 6 feet.
              By iteratively uploading, testing, and revising coefficients on the left and right motors, I was able to
              determine coefficients that gave the results in the below video. Because I pre-made various functions for the
              previous task
              that would take a power level as a parameter, the process was fairly simple. As an additional note, I changed my previous
              code to take a power level between 0 and 100. This power level gets mapped to a PWM value between 65-255 for the left motor and 
              60-255 for the right. This eliminates the deadband that I tested in the motor. An input of 0 still maps to 0 in order to stop but 
              now a power level of 10 will still yield motion. 
            </p>
            <iframe width="320" height="560" src="https://www.youtube.com/embed/FGu0dwRnIEo"
              title="Lab 5 moving straight" frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
            <p>
              The final task had us verifying that we could exhibit remote open loop control of our robot through
              jupyter lab. Below is a video of me giving various inputs to the bot and it reacting accordingly. The code
              I used was, again, the same header file I created to test the motors imported into the bluetooth code file
              in order to create commands that could be received.
            </p>
            <iframe width="320" height="560" src="https://www.youtube.com/embed/JTw5u7qmTsQ"
              title="Lab 5 untethered control" frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
            <h2 style="text-align: center">CONCLUSION</h2>
            <p>
              Advanced motor control opens up the door to all the possibilities for our RC car. It's the backbone of the
              way our stunt car will interact with the world and when it's done right, it can be very straightforward to
              implement and understand.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- work details part end -->

  <section class="works works-fit">
    <div class="container">
      <h2 class="subtitle">Other Labs</h2>
      <div class="row">
        <div class="col-md-3 col-sm-6">
          <figure class="wow fadeInLeft animated portfolio-item animated" data-wow-duration="300ms" data-wow-delay="0ms"
            style="visibility: visible; animation-duration: 300ms; -webkit-animation-duration: 300ms; animation-delay: 0ms; -webkit-animation-delay: 0ms; animation-name: fadeInLeft; -webkit-animation-name: fadeInLeft;">
            <div class="img-wrapper">
              <img style="height: 330px" src="images/lab3cover.png" class="img-fluid" alt="portfolio items">
              <div class="overlay">
                <div class="buttons">
                  <a target="_blank" href="Lab3.html">Details</a>
                </div>
              </div>
            </div>
            <figcaption>
              <h4>
                <a href="Lab3.html">
                  Lab 3: Time of Flight
                </a>
              </h4>
              <p>
                Implementing and Testing Time of Flight Sensors
              </p>
            </figcaption>
          </figure>
        </div>

        <div class="col-md-3 col-sm-6">
          <figure class="wow fadeInLeft animated animated" data-wow-duration="300ms" data-wow-delay="300ms"
            style="visibility: visible; animation-duration: 300ms; -webkit-animation-duration: 300ms; animation-delay: 300ms; -webkit-animation-delay: 300ms; animation-name: fadeInLeft; -webkit-animation-name: fadeInLeft;">
            <div class="img-wrapper">
              <img src="images/Lab_4_profile.png" class="img-fluid" alt="portfolio items" style="height: 330px">
              <div class="overlay">
                <div class="buttons">
                  <a target="_blank" href="Lab4.html">Details</a>
                </div>
              </div>
            </div>
            <figcaption>
              <h4>
                <a href="Lab4.html">
                  Lab 4: The IMU
                </a>
              </h4>
              <p>
                Connecting the artemis to reality.
              </p>
            </figcaption>
          </figure>
        </div>

        <div class="col-md-3 col-sm-6">
          <figure class="wow fadeInLeft animated animated" data-wow-duration="300ms" data-wow-delay="300ms"
            style="visibility: visible; animation-duration: 300ms; -webkit-animation-duration: 300ms; animation-delay: 300ms; -webkit-animation-delay: 300ms; animation-name: fadeInLeft; -webkit-animation-name: fadeInLeft;">
            <div class="img-wrapper">
              <img src="images/lab6.png" class="img-fluid" alt="" style="height: 330px">
              <div class="overlay">
                <div class="buttons">
                  <a target="_blank" href="Lab6.html">Details</a>
                </div>
              </div>
            </div>
            <figcaption>
              <h4>
                <a href="Lab6.html">
                  Lab 6: PID Control
                </a>
              </h4>
              <p>
                Using gain constants to control angle.
              </p>
            </figcaption>
          </figure>
        </div>

        <div class="col-md-3 col-sm-6">
          <figure class="wow fadeInLeft animated animated" data-wow-duration="300ms" data-wow-delay="600ms"
            style="visibility: visible; animation-duration: 300ms; -webkit-animation-duration: 300ms; animation-delay: 600ms; -webkit-animation-delay: 600ms; animation-name: fadeInLeft; -webkit-animation-name: fadeInLeft;">
            <div class="img-wrapper">
              <img src="images\Kfthumbnail.jpg" class="img-fluid" alt="" style="height: 330px">
              <div class="overlay">
                <div class="buttons">
                  <a target="_blank" href="Lab7.html">Details</a>
                </div>
              </div>
            </div>
            <figcaption>
              <h4>
                <a href="Lab7.html">
                  Lab 7: Kalman Filter
                </a>
              </h4>
              <p>
                Fixing noisy sensors with statistics!
              </p>
            </figcaption>
          </figure>
        </div>
      </div>
    </div>
  </section>
  <!-- Template Javascript Files
	================================================== -->
  <!-- jquery -->
  <script src="plugins/jQurey/jquery.min.js"></script>
  <!-- Form Validation -->
  <script src="plugins/form-validation/jquery.form.js"></script>
  <script src="plugins/form-validation/jquery.validate.min.js"></script>
  <!-- slick slider -->
  <script src="plugins/slick/slick.min.js"></script>
  <!-- bootstrap js -->
  <script src="plugins/bootstrap/bootstrap.min.js"></script>
  <!-- wow js -->
  <script src="plugins/wow-js/wow.min.js"></script>
  <!-- slider js -->
  <script src="plugins/slider/slider.js"></script>
  <!-- Fancybox -->
  <script src="plugins/facncybox/jquery.fancybox.js"></script>
  <!-- template main js -->
  <script src="js/main.js"></script>
</body>

</html>